import{j as e,a as W,u as q,b as B,r as i,L as D,g as z,z as F}from"./index-BCqjIhcd.js";import{S as L}from"./SEO-CKpWeq1n.js";const P=({currentPage:a,totalPages:l,onPageChange:g,itemsPerPage:p,totalItems:N,onItemsPerPageChange:w,pageSizeOptions:v=[12,24,48]})=>{const u=()=>{a>1&&g(a-1)},n=()=>{a<l&&g(a+1)},y=()=>{const t=[];if(l<=5)for(let r=1;r<=l;r++)t.push(r);else{t.push(1),a>3&&t.push("...");for(let r=Math.max(2,a-1);r<=Math.min(l-1,a+1);r++)t.includes(r)||t.push(r);a<l-2&&t.push("..."),t.includes(l)||t.push(l)}return t},x=(a-1)*p+1,j=Math.min(a*p,N);return l<=1?null:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Show:"}),e.jsx("select",{value:p,onChange:t=>w(Number(t.target.value)),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary outline-none",children:v.map(t=>e.jsxs("option",{value:t,children:[t," items"]},t))})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[x,"-",j]})," of"," ",e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:N})," products"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:u,disabled:a===1,className:`p-2 rounded-lg transition-colors ${a===1?"text-gray-300 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-label":"Previous page",children:e.jsx("span",{className:"material-symbols-outlined",children:"chevron_left"})}),y().map((t,b)=>t==="..."?e.jsx("span",{className:"px-2 text-gray-400",children:"..."},`ellipsis-${b}`):e.jsx("button",{onClick:()=>g(t),className:`min-w-[40px] h-10 rounded-lg font-medium transition-colors ${a===t?"bg-primary text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-label":`Page ${t}`,"aria-current":a===t?"page":void 0,children:t},t)),e.jsx("button",{onClick:n,disabled:a===l,className:`p-2 rounded-lg transition-colors ${a===l?"text-gray-300 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-label":"Next page",children:e.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})})]})]})},R=()=>{const{allProducts:a,categories:l}=W(),{cartItems:g,addToCart:p}=q(),{isInWishlist:N,addToWishlist:w,removeFromWishlist:v,wishlistItems:u}=B(),[n,y]=i.useState("All"),[x,j]=i.useState(""),[t,b]=i.useState(""),[r,A]=i.useState(""),[C,k]=i.useState(1),[f,I]=i.useState(12),S=i.useMemo(()=>a,[a]),c=i.useMemo(()=>S?S.filter(s=>{const d=n==="All"||s.category===n,o=x.toLowerCase(),m=s.name.toLowerCase().includes(o)||s.description.toLowerCase().includes(o),h=s.price,O=t!==""?parseFloat(t):0,T=r!==""?parseFloat(r):1/0,E=h>=O&&h<=T;return d&&m&&E}):[],[n,x,t,r,S]),M=Math.ceil(c.length/f),_=i.useMemo(()=>{const s=(C-1)*f;return c.slice(s,s+f)},[c,C,f]);i.useEffect(()=>{k(1)},[n,x,t,r]);const $=()=>{y("All"),j(""),b(""),A(""),k(1)};return e.jsxs("div",{className:"w-full",children:[e.jsx(L,{title:"Shop for a Cause - Fair Trade Products | EARG",description:"Shop 100% fair trade handmade products. All proceeds support education programs for rural girls in Kenya. Browse sustainable crafts, apparel, and jewelry.",keywords:"fair trade, shop, handmade, sustainable, crafts, jewelry, apparel, eco-friendly, donate"}),e.jsx("section",{className:"relative",children:e.jsx("div",{className:"w-full flex flex-col gap-6 bg-cover bg-center bg-no-repeat min-h-[360px] items-center justify-center p-8",style:{backgroundImage:'linear-gradient(rgba(20, 83, 45, 0.7) 0%, rgba(20, 83, 45, 0.9) 100%), url("https://lh3.googleusercontent.com/aida-public/AB6AXuB8V2Y0FPs9AQ-wkvMriEOsh6jc1DXkcceSvB6Wz6g69DuoqeYJw7xON0WZHUeb6oNHo2eEdoYAVqDMx3iiPTQlL1bmoy9F5YVRZT0EFKcJsPo-tUcOh9B4Fp-oN1SBBOPJg_29FKD-ugLND0FouT-wDlv8zZP6ijpQod34V5qn23wcEFap1b_mXCPxQvwBx9bog4wCxMl1ve70i9aJCQFEOnZJeACnolaHTrxzbpalfOd8bcZBtqj7eVDz0GzaKWJ-HNd_15WdCA0")'},children:e.jsxs("div",{className:"flex flex-col gap-3 text-center max-w-[700px] animate-fade-in-up",children:[e.jsx("h1",{className:"text-white text-4xl md:text-5xl font-black leading-tight tracking-[-0.033em] drop-shadow-md",children:"Shop with Purpose"}),e.jsx("h2",{className:"text-gray-100 text-base md:text-lg font-normal leading-relaxed drop-shadow-sm max-w-[500px] mx-auto",children:"Every purchase supports our mission. 100% of proceeds go directly to the field."})]})})}),e.jsx("div",{className:"flex-grow layout-container w-full max-w-[1440px] mx-auto px-4 md:px-8 lg:px-12 py-8 lg:py-12",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 xl:gap-12",children:[e.jsxs("aside",{className:"w-full lg:w-72 flex-shrink-0 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold leading-tight tracking-[-0.015em] pb-4 border-b border-border-light dark:border-border-dark mb-4 text-gray-900 dark:text-white",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search products...",value:x,onChange:s=>j(s.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary outline-none"}),e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-2.5 text-gray-400",children:"search"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold leading-tight tracking-[-0.015em] pb-4 border-b border-border-light dark:border-border-dark mb-4 text-gray-900 dark:text-white",children:"Price Range"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Min"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-400 text-sm",children:"$"}),e.jsx("input",{type:"number",placeholder:"0",value:t,onChange:s=>b(s.target.value),className:"w-full pl-6 pr-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary outline-none"})]})]}),e.jsx("span",{className:"text-gray-400 mt-5",children:"-"}),e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Max"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-400 text-sm",children:"$"}),e.jsx("input",{type:"number",placeholder:"Max",value:r,onChange:s=>A(s.target.value),className:"w-full pl-6 pr-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary outline-none"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold leading-tight tracking-[-0.015em] pb-4 border-b border-border-light dark:border-border-dark mb-4 text-gray-900 dark:text-white",children:"Categories"}),e.jsx("ul",{className:"space-y-3",children:["All",...l].map(s=>e.jsx("li",{children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:n===s,onChange:()=>y(s),className:"w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary dark:bg-background-dark dark:border-gray-600"}),e.jsx("span",{className:`text-sm font-medium transition-colors ${n===s?"text-primary":"text-gray-700 dark:text-gray-300"} group-hover:text-primary`,children:s==="All"?"All Products":s})]})},s))})]}),e.jsxs("button",{onClick:$,className:"w-full py-2.5 text-sm font-bold text-gray-600 dark:text-gray-300 hover:text-primary border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"filter_alt_off"}),"Reset Filters"]})]}),e.jsxs("main",{className:"flex-1 flex flex-col gap-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between bg-surface-light dark:bg-surface-dark p-4 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:e.jsxs("p",{className:"text-sm text-gray-500 font-medium",children:["Showing ",c.length," result",c.length!==1?"s":""]})}),c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-gray-300 mb-4",children:"search_off"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-500 max-w-sm",children:"Try adjusting your search or filters to find what you're looking for."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(s=>e.jsxs(D,{to:`/product/${s.id}`,className:"group flex flex-col bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300 border border-border-light dark:border-border-dark bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gray-100 dark:bg-gray-800",children:[e.jsx("img",{className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105 saturate-[0.8] group-hover:saturate-100",src:z(s.images&&s.images[0]),alt:s.name,loading:"lazy"}),s.stock<=0&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-black text-2xl tracking-wider",children:"OUT OF STOCK"})}),e.jsxs("div",{className:"absolute top-3 left-3 flex gap-2",children:[e.jsxs("span",{className:"bg-white/90 dark:bg-black/80 backdrop-blur-sm text-text-main-light dark:text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px] text-primary",children:"volunteer_activism"}),"Fair Trade"]}),s.stock<=0&&e.jsx("span",{className:"bg-red-500/90 backdrop-blur-sm text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm",children:"Out of Stock"})]}),s.stock>0&&e.jsx("button",{onClick:d=>{d.preventDefault();const o=g.find(h=>h.id===s.id);if((o?o.quantity:0)>=s.stock){F.error("Stock limit reached for this item in your cart.");return}p(s)},className:"absolute bottom-4 right-4 h-10 w-10 bg-primary text-white rounded-full flex items-center justify-center translate-y-14 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300 shadow-md hover:scale-110",children:e.jsx("span",{className:"material-symbols-outlined",children:"add_shopping_cart"})})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-2 flex-grow",children:[e.jsx("h3",{className:"text-base font-bold text-text-main-light dark:text-white line-clamp-1",children:s.name}),e.jsx("p",{className:"text-xs text-text-muted-light dark:text-text-muted-dark line-clamp-1 text-gray-500",children:s.impact}),s.stock>0&&s.stock<=5&&e.jsxs("span",{className:"text-xs font-bold text-orange-600",children:["⚠️ Only ",s.stock," left!"]}),s.stock>5&&s.stock<=20&&e.jsx("span",{className:"text-xs text-green-600",children:"✓ In Stock"}),e.jsx("button",{onClick:d=>{if(d.preventDefault(),u.some(m=>m.product_id===s.id)){const m=u.find(h=>h.product_id===s.id);v(m.id),F.success("Removed from wishlist")}else w(s.id),F.success("Added to wishlist!")},className:"absolute bottom-3 right-3 p-2 bg-white dark:bg-gray-800 rounded-full shadow-md hover:scale-110 transition-transform",children:e.jsx("span",{className:`material-symbols-outlined ${u.some(d=>d.product_id===s.id)?"text-red-500 fill-current":"text-gray-400"}`,children:"favorite"})}),e.jsxs("div",{className:"flex items-center justify-between mt-auto pt-2",children:[e.jsx("div",{className:"flex flex-col",children:s.offerPrice?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-gray-400 line-through",children:["$",parseFloat(s.price).toFixed(2)]}),e.jsxs("span",{className:"text-lg font-bold text-red-600",children:["$",parseFloat(s.offerPrice).toFixed(2)]})]}):e.jsxs("span",{className:"text-lg font-bold text-secondary",children:["$",parseFloat(s.price).toFixed(2)]})}),e.jsx("div",{className:"flex gap-1 text-yellow-400",children:[...Array(5)].map((d,o)=>e.jsx("span",{className:`material-symbols-outlined text-[16px] fill-current ${o<Math.floor(s.rating)?"":"text-gray-300"}`,children:"star"},o))})]})]})]},s.id))}),e.jsx(P,{currentPage:C,totalPages:M,onPageChange:k,itemsPerPage:f,totalItems:c.length,onItemsPerPageChange:s=>{I(s),k(1)},pageSizeOptions:[12,24,48]})]})]})]})})]})};export{R as default};
